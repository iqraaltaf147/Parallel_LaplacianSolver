<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.16"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Parallel Laplacian Solver: Parallel Laplacian Solver using Random Walk</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Parallel Laplacian Solver
   </div>
   <div id="projectbrief">Laplacian Solver using Random walk</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.16 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Parallel Laplacian Solver using Random Walk </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This repository will contain the implementation of the algorithm presented in <a href="https://arxiv.org/abs/1905.04989">this paper</a>. The paper describes a random walk based method to solve an important class of Laplacian Systems (Lx = b), called "one-sink" systems, where exactly one of the coordinates of b is negative.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Problem Statement</h1>
<p>You are given an undirected positive weighted connected graph G = (V, E, w) with adjacency matrix A<sub>uv</sub> = w<sub>uv</sub>. You are required to solve the system of equations: Lx = b where L is the <a href="https://en.wikipedia.org/wiki/Laplacian_matrix#Definition">Laplacian matrix</a>.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Algorithm</h1>
<p>The algorithm works by deriving the canonical solution from the stationary state of the data collection process: Packets are generated at each node as an independent Bernoulli process, transmitted to neighbors according to <a href="https://en.wikipedia.org/wiki/Stochastic_matrix#Definition_and_properties">stochastic matrix</a> where P<sub>uv</sub> is directly propotional to w<sub>uv</sub> and sunk at sink node only. Naturally, it consists of two phases: find parameter &beta; such that DCP is ergodic and compute the stationary state, compute the canonical solution by choosing an appropriate constant offset.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Computing beta and stationary state</h2>
<p>We have a lower limit for &beta;* below which it's ergodic, so we binary search this lower limit. Whenever it's not ergodic, there's one &eta; (queue occupancy probability) which reaches 1, so we simply simulate the DCP at each &beta; and check for this condition.</p>
<div class="fragment"><div class="line">func estimateQueueOccupancyProbability(P, beta, J, T_mix, T_samp):</div>
<div class="line">    We generate and transmit for T_mix seconds, allowing it to reach</div>
<div class="line">    stationarity and then count the number of seconds queue is not empty for</div>
<div class="line">    T_samp time, to estimate occupancy probability</div>
<div class="line">begin</div>
<div class="line">    t := 0</div>
<div class="line">    Q_t(u) := 0 for all nodes</div>
<div class="line">    cnt(u) := 0 for all nodes</div>
<div class="line"> </div>
<div class="line">    repeat</div>
<div class="line">        generate packets at all nodes according to Bernoulli(beta J_u)</div>
<div class="line">        transmit packets according to stochastic matrix, P</div>
<div class="line">        increment cnt if queue is not empty and t &gt; t_mix for all nodes</div>
<div class="line">        t := t + 1</div>
<div class="line">    until t &lt;= T_mix + T_samp</div>
<div class="line"> </div>
<div class="line">    report: cnt/T_samp as the estimate</div>
<div class="line">end</div>
<div class="line"> </div>
<div class="line">func computeStationaryState(P, b, t_hit):</div>
<div class="line">    We start with beta = 1 and reduce by half everytime we find that it&#39;s</div>
<div class="line">    non-ergodic</div>
<div class="line">begin</div>
<div class="line">    T_mix := 64t_hit log(1/e1)</div>
<div class="line">    T_samp := 4logn/(k^2 e2^2)</div>
<div class="line">    J := -b/b_sink</div>
<div class="line"> </div>
<div class="line">    beta := 1</div>
<div class="line">    repeat</div>
<div class="line">        beta := beta/2</div>
<div class="line">        eta := estimateQueueOccupancyProbability(P, beta, J, T_mix, T_samp)</div>
<div class="line">    until max(eta) &lt; 0.75(1 - e1 - e2)</div>
<div class="line"> </div>
<div class="line">    report: eta as the stationary state</div>
<div class="line">end</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md4"></a>
Offset for canonical solution</h2>
<p>The solution to Lx=b satisfies &lt;&lt;Lx, 1&gt;&gt; = 0 as &lambda;<sub>1</sub> = 0, so we need to have an offset for stationary state such that this holds.</p>
<div class="fragment"><div class="line">func computeCanonicalSolution(eta, beta, D, b):</div>
<div class="line">    Shifts the stationary state, eta by z*</div>
<div class="line">begin</div>
<div class="line">    z* := -sum of eta(u)/d(u) for all u</div>
<div class="line">    sum_d := sum of d(u) for all u</div>
<div class="line">    x(u) := -b_sink(eta(u)/d(u) + z*d(u)/sum_d)/beta</div>
<div class="line"> </div>
<div class="line">    report: x as the solution to Lx=b</div>
<div class="line">end</div>
</div><!-- fragment --><ul>
<li>Refer to the paper for a detailed analysis and description of the algorithm regarding constants.</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
IO format</h1>
<p>The input will be of the following format</p>
<div class="fragment"><div class="line">The first line in the file is a single integer n, denoting the number of nodes</div>
<div class="line">The following n lines will have n space seperated real numbers, the Adjacency</div>
<div class="line">matrix in row-major format</div>
<div class="line">The final line will have n space seperated real numbers, the b in Lx=b</div>
<div class="line"> </div>
<div class="line">A[i][i] = 0</div>
<div class="line">A[i][j] = A[j][i] &gt;= 0</div>
<div class="line">b[n] = sum(b[1..n-1])</div>
</div><!-- fragment --><p>The output should be of the following format:</p>
<div class="fragment"><div class="line">Print one and only line containing n space seperated real numbers, the solution</div>
<div class="line">to Lx=b</div>
</div><!-- fragment --><hr  />
<h1><a class="anchor" id="autotoc_md7"></a>
TODO</h1>
<ul>
<li>Implement these sequentially first.</li>
<li>Parallel implementation for a k-core machine requires graph partioning. How to? </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.16
</small></address>
</body>
</html>
